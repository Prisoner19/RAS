<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                template="/template/esqueleto.xhtml" >



    <ui:define name="content">
    <h:form id="form">

		<p:growl id="growl" showDetail="true" life="3000" />

		<!-- PERSONAL -->
		<p:dialog id="dialog" header="Nuevo" widgetVar="dialog"
			resizable="false" width="400" height="200" showEffect="clip"
			hideEffect="fold" modal="true">

			<h:panelGrid id="display" columns="2" cellpadding="4">
				<h:outputText value="Id:" rendered="#{PersonalBean.accionEditar}" />
				<h:outputText value="#{PersonalBean.personal.idPersonal}"
					rendered="#{PersonalBean.accionEditar}" />
				
				<h:outputText value="Nombre de Personal:" />
				<p:inputText value="#{PersonalBean.personal.nombre}" />

				<h:outputText value="Profesion:" />
				<p:inputText value="#{PersonalBean.personal.profesion}" />
				
				<h:outputText value="Celular:" />
				<p:inputText value="#{PersonalBean.personal.celular}" />
				
				<h:outputText value="E - Mail:" />
				<p:inputText value="#{PersonalBean.personal.email}" />
				
				<p:commandButton value="#{PersonalBean.etiBotonDialog()}"
					actionListener="#{PersonalBean.procesarDialog}"
					update=":form:datatablecampana, growl" oncomplete="dialog.hide();" />

			</h:panelGrid>
		</p:dialog>

		<p:panel styleClass="panel">
			<span class="mantenimiento">PERSONAL</span>
			<div id="cuerpo">

				<p:dataTable id="datatablecampana" var="c" widgetVar="dt"
					value="#{PersonalBean.personals}" rowKey="#{c.idPersonal}"
					selection="#{PersonalBean.personalNuevo}" selectionMode="single"
					styleClass="datatable_style_general" editable="true" paginator="true" rows="10"
					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					rowsPerPageTemplate="2,5,10"  paginatorPosition="bottom">

					<f:facet name="header">

						<p:commandButton id="viewNuevo" styleClass="botonPeque"
							value="Nuevo" icon="ui-icon-document" update=":form:display"
							oncomplete="dialog.show()"
							actionListener="#{PersonalBean.nuevoEvent}" />

						<p:commandButton id="viewEditar" styleClass="botonPeque"
							value="Editar" icon="ui-icon-search"
							update=":form:display, :form:growl"
							actionListener="#{PersonalBean.editarEvent}" />

						<p:commandButton id="EliminarRegistro" styleClass="botonPeque"
							value="Eliminar" icon="ui-icon-closethick"
							update=":form:display, :form:growl"
							actionListener="#{PersonalBean.eliminarEvent}" />

					</f:facet>
					
					<p:ajax event="rowEdit" listener="#{PersonalBean.onEdit}" update=":form:growl" />  
        			<p:ajax event="rowEditCancel" listener="#{PersonalBean.onCancel}" update=":form:growl" /> 
					
					<p:column style="width:6%;">
						<f:facet name="header">
							<h:panelGrid class="opciones" columns="2">
						    	<p:commandButton id="nuevo" icon="ui-icon-plusthick" styleClass="botonOpcion" update=":form:display" oncomplete="dialog.show()" actionListener="#{PersonalBean.nuevoEvent}"/>
						    	<p:commandButton id="eliminar" icon="ui-icon-trash" styleClass="botonOpcion" update=":form:display, :form:growl" actionListener="#{PersonalBean.eliminarEvent}"/>
							</h:panelGrid>
						</f:facet>
						
						<p:rowEditor />
					</p:column>
					
					<p:column styleClass="columna" headerText="Nombre"
						filterBy="#{c.nombre}">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{c.nombre}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{c.nombre}" style="width:100%"/>
							</f:facet>
						</p:cellEditor>
					</p:column>
					
					<p:column styleClass="columna" headerText="Profesion" filterBy="#{c.profesion}">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{c.profesion}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{c.profesion}" style="width:100%"/>
							</f:facet>
						</p:cellEditor>
					</p:column>
					
					<p:column styleClass="columna" headerText="Celular" filterBy="#{c.celular}">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{c.celular}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{c.celular}" style="width:100%"/>
							</f:facet>
						</p:cellEditor>
					</p:column>
					
					<p:column styleClass="columna" headerText="Email" filterBy="#{c.email}">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{c.email}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{c.email}" style="width:100%"/>
							</f:facet>
						</p:cellEditor>
					</p:column>
					
					<p:column styleClass="columna" headerText="Registrado" filterBy="#{c.registro}">
						<h:outputText styleClass="numericos" value="#{c.registro}" />
					</p:column>

				</p:dataTable>
			</div>

		</p:panel>

		<p:dialog id="modalDialog" header="CONFIRMACION" widgetVar="dlg2"
			modal="true" height="150" width="400" closable="false"
			resizable="false">
			<p:messages id="messages" showDetail="true" autoUpdate="true"
				closable="false" />
			<p:commandButton value="OK" onclick="dlg2.hide()" />
		</p:dialog>

		<p:confirmDialog id="confirmDialog"
			message="Â¿Esta seguro de esta accion?" header="Eliminar Registro"
			severity="alert" widgetVar="confirmation">

			<p:commandButton id="confirm" value="Si"
				update=":form:datatablecampana, growl"
				oncomplete="confirmation.hide()"
				actionListener="#{PersonalBean.validarEliminar}" />
			<p:commandButton id="decline" value="No"
				onclick="confirmation.hide()" type="button" />

		</p:confirmDialog>

	</h:form>

 </ui:define>


</ui:composition>
